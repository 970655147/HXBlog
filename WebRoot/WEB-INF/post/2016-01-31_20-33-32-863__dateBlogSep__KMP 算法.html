<h2 style="margin-left: 13px; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(255, 0, 0); letter-spacing: 0px;">refer :&nbsp;http://www.ruanyifeng.com/blog/2013/05/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm.html</span></h2><p style="margin-left: 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#556677;letter-spacing: -0"><br/></span></p><p style="margin-left: 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#556677;letter-spacing: -0">作者：</span><span style="font-size:19px;font-family: &#39;Georgia&#39;,serif;color:#556677;letter-spacing:-0"> <a href="http://www.ruanyifeng.com/"><span style="font-family:宋体;color:#556677;border:none windowtext 1px;padding:0;text-underline:none">阮一峰</span></a></span></p><p style="margin-left: 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#556677;letter-spacing: -0">日期：</span><span style="font-size:19px;font-family: &#39;Georgia&#39;,serif;color:#556677;letter-spacing:-0"> <a href="http://www.ruanyifeng.com/blog/2013/05/"><span style="color:#556677;border:none windowtext 1px;padding:0;text-underline:none">2013</span><span style="font-family:宋体;color:#556677;border:none windowtext 1px;padding:0;text-underline:none">年</span><span style="color:#556677;border:none windowtext 1px;padding:0;text-underline:none">5</span><span style="font-family:宋体;color:#556677;border:none windowtext 1px;padding:0;text-underline:none">月</span><span style="color:#556677;border:none windowtext 1px;padding:0;text-underline:none"> 1</span><span style="font-family:宋体;color:#556677;border:none windowtext 1px;padding:0;text-underline: none">日</span></a></span></p><p style="margin-left: 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0"><a href="http://en.wikipedia.org/wiki/String_searching_algorithm" target="_blank"><span style="font-family:宋体;color:#112233;border:none windowtext 1px;padding:0">字符串匹配</span></a></span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">是计算机的基本任务之一。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">举例来说，有一个字符串</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;BBC ABCDAB ABCDABCDABDE&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，我想知道，里面是否包含另一个字符串</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;ABCDABD&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">？</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0"><img src="/HXBlog/upload/image/20160131/1454242989056083964.jpg" title="1454242989056083964.jpg" alt="bg2013050101.jpg"/></span></p><p style="margin-left: 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">许多算法可以完成这个任务，</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0"><a href="http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm" target="_blank"><span style="color:#112233;border:none windowtext 1px;padding:0">Knuth-Morris-Pratt</span><span style="font-family:宋体;color:#112233;border:none windowtext 1px;padding:0">算法</span></a></span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">（简称</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">KMP</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">）是最常用的之一。它以三个发明者命名，起头的那个</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">K</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">就是著名科学家</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">Donald Knuth</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454242997139025829.jpg" title="1454242997139025829.jpg" alt="bg2013050102.jpg"/></p><p style="margin-left: 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">这种算法不太容易理解，网上有很多</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0"><a href="http://www.google.com/search?q=Knuth-Morris-Pratt+algorithm" target="_blank"><span style="font-family:宋体;color:#112233;border:none windowtext 1px;padding:0">解释</span></a></span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">，但读起来都很费劲。直到读到</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0"><a href="http://jakeboxer.com/blog/2009/12/13/the-knuth-morris-pratt-algorithm-in-my-own-words/" target="_blank"><span style="color:#112233;border:none windowtext 1px;padding:0">Jake Boxer</span></a></span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">的文章，我才真正理解这种算法。下面，我用自己的语言，试图写一篇比较好懂的</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">KMP</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">算法解释。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">1.</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454243091668004340.png" title="1454243091668004340.png" alt="bg2013050103.png"/></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">首先，字符串</span><span style="font-size: 19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;BBC ABCDAB ABCDABCDABDE&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">的第一个字符与搜索词</span><span style="font-size: 19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;ABCDABD&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">的第一个字符，进行比较。因为</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">B</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">与</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">A</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">不匹配，所以搜索词后移一位。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">2.</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454243098783017886.png" title="1454243098783017886.png" alt="bg2013050104.png"/></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">因为</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">B</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">与</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">A</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">不匹配，搜索词再往后移。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">3.</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454243106767030417.png" title="1454243106767030417.png" alt="bg2013050105.png"/></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">就这样，直到字符串有一个字符，与搜索词的第一个字符相同为止。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">4.</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454243116844075723.png" title="1454243116844075723.png" alt="bg2013050106.png"/></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">接着比较字符串和搜索词的下一个字符，还是相同。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">5.</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454243129597056957.png" title="1454243129597056957.png" alt="bg2013050107 (1).png"/></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">直到字符串有一个字符，与搜索词对应的字符不相同为止。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">6.</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454243316435006832.png" title="1454243316435006832.png" alt="bg2013050108.png"/></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">这时，最自然的反应是，将搜索词整个后移一位，再从头逐个比较。这样做虽然可行，但是效率很差，因为你要把</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">搜索位置</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">移到已经比较过的位置，重比一遍。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">7.</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454243145167013032.png" title="1454243145167013032.png" alt="bg2013050107 (3).png"/></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">一个基本事实是，当空格与</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">D</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">不匹配时，你其实知道前面六个字符是</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;ABCDAB&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">。</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">KMP</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">算法的想法是，设法利用这个已知信息，不要把</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">搜索位置</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">移回已经比较过的位置，继续把它向后移，这样就提高了效率。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">8.</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454243339549042027.png" title="1454243339549042027.png" alt="bg2013050109.png"/></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">怎么做到这一点呢？可以针对搜索词，算出一张《部分匹配表》（</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">Partial Match Table</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">）。这张表是如何产生的，后面再介绍，这里只要会用就可以了。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">9.</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454243145167013032.png" title="1454243164386012307.png" alt="1454243164386012307.png" width="588" height="158" border="0" vspace="0" style="width: 588px; height: 158px;"/></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">已知空格与</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">D</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">不匹配时，前面六个字符</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;ABCDAB&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">是匹配的。查表可知，最后一个匹配字符</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">B</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">对应的</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">部分匹配值</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">为</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">2</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，因此按照下面的公式算出向后移动的位数：</span></p><p style="margin-left: 45px;line-height: 29px;background: rgb(245, 242, 240)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">　　移动位数</span><span style="font-size: 19px;font-family:Consolas;color:#111111;letter-spacing:-0"> = </span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">已匹配的字符数</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0"> - </span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">对应的部分匹配值</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">因为</span><span style="font-size:19px;font-family: &#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0"> 6 - 2 </span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">等于</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">4</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">，所以将搜索词向后移动</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">4</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">位。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">10.</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454243435322061174.png" title="1454243435322061174.png" alt="bg2013050110.png"/></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">因为空格与Ｃ不匹配，搜索词还要继续往后移。这时，已匹配的字符数为</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">2</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">（</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;AB&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">），对应的</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">部分匹配值</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">为</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">0</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">。所以，移动位数</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0"> = 2 - 0</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，结果为</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing: -0"> 2</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">，于是将搜索词向后移</span><span style="font-size: 19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">2</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">位。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">11.</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454243457799003810.png" title="1454243457799003810.png" alt="bg2013050111.png"/></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">因为空格与</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">A</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">不匹配，继续后移一位。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">12.</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454243476104086649.png" title="1454243476104086649.png" alt="bg2013050112.png"/></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">逐位比较，直到发现</span><span style="font-size: 19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">C</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">与</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">D</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">不匹配。于是，移动位数</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0"> = 6 - 2</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，继续将搜索词向后移动</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">4</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">位。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">13.</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454243495461009664.png" title="1454243495461009664.png" alt="bg2013050113.png"/></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">逐位比较，直到搜索词的最后一位，发现完全匹配，于是搜索完成。如果还要继续搜索（即找出全部匹配），移动位数</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0"> = 7 - 0</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，再将搜索词向后移动</span><span style="font-size:19px;font-family: &#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">7</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">位，这里就不再重复了。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">14.</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454243508820033454.png" title="1454243508820033454.png" alt="bg2013050114.png"/></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">下面介绍《部分匹配表》是如何产生的。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">首先，要了解两个概念：</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">前缀</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">和</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">后缀</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">。</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0"> &quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">前缀</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">指除了最后一个字符以外，一个字符串的全部头部组合；</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">后缀</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">指除了第一个字符以外，一个字符串的全部尾部组合。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">15.</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454243339549042027.png"/></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">部分匹配值</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">就是</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">前缀</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">和</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">后缀</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">的最长的共有元素的长度。以</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;ABCDABD&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">为例，</span></p><p style="margin-left: 45px;line-height: 29px;background: rgb(245, 242, 240)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">　　－　</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">&quot;A&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">的前缀和后缀都为空集，共有元素的长度为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">0</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">；</span></p><p style="margin: 16px 0 0 45px;line-height: 29px;background: rgb(245, 242, 240)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">　　－　</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">&quot;AB&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">的前缀为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">[A]</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，后缀为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">[B]</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，共有元素的长度为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">0</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">；</span></p><p style="margin: 16px 0 0 45px;line-height: 29px;background: rgb(245, 242, 240)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">　　－　</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">&quot;ABC&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">的前缀为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">[A, AB]</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，后缀为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">[BC, C]</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，共有元素的长度</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">0</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">；</span></p><p style="margin: 16px 0 0 45px;line-height: 29px;background: rgb(245, 242, 240)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">　　－　</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">&quot;ABCD&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">的前缀为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">[A, AB, ABC]</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，后缀为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">[BCD, CD, D]</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，共有元素的长度为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">0</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">；</span></p><p style="margin: 16px 0 0 45px;line-height: 29px;background: rgb(245, 242, 240)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">　　－　</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">&quot;ABCDA&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">的前缀为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">[A, AB, ABC, ABCD]</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，后缀为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">[BCDA, CDA, DA, A]</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，共有元素为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">&quot;A&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，长度为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">1</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">；</span></p><p style="margin: 16px 0 0 45px;line-height: 29px;background: rgb(245, 242, 240)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">　　－　</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">&quot;ABCDAB&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">的前缀为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">[A, AB, ABC, ABCD, ABCDA]</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，后缀为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">[BCDAB, CDAB, DAB, AB, B]</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，共有元素为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">&quot;AB&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，长度为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">2</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">；</span></p><p style="margin: 16px 0 0 45px;line-height: 29px;background: rgb(245, 242, 240)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">　　－　</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">&quot;ABCDABD&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">的前缀为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">[A, AB, ABC, ABCD, ABCDA, ABCDAB]</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，后缀为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">[BCDABD, CDABD, DABD, ABD, BD, D]</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，共有元素的长度为</span><span style="font-size:19px;font-family:Consolas;color:#111111;letter-spacing:-0">0</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">16.</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><img src="/HXBlog/upload/image/20160131/1454243476104086649.png"/></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">部分匹配</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">的实质是，有时候，字符串头部和尾部会有重复。比如，</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;ABCDAB&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">之中有两个</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;AB&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">，那么它的</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">部分匹配值</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">就是</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">2</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">（</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;AB&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">的长度）。搜索词移动的时候，第一个</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;AB&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">向后移动</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">4</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">位（字符串长度</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">-</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">部分匹配值），就可以来到第二个</span><span style="font-size:19px;font-family:&#39;Georgia&#39;,serif;color:#111111;letter-spacing:-0">&quot;AB&quot;</span><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing:-0">的位置。</span></p><p style="margin: 16px 0 0 13px;line-height: 29px;background: rgb(245, 245, 213)"><span style="font-size:19px;font-family:宋体;color:#111111;letter-spacing: -0">（完）</span></p><p>&nbsp;</p><p><br/></p>