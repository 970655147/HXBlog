<h2 style="white-space: normal; margin-left: 13px; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(255, 0, 0); letter-spacing: 0px;">refer :&nbsp;http://www.ruanyifeng.com/blog/2013/05/boyer-moore_string_search_algorithm.html</span></h2><p style="margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(85, 102, 119); letter-spacing: 0px;"><br/></span></p><p style="margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(85, 102, 119); letter-spacing: 0px;">作者：</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(85, 102, 119); letter-spacing: 0px;">&nbsp;<a href="http://www.ruanyifeng.com/"><span style="font-family: 宋体; color: rgb(85, 102, 119); border: 1px none windowtext; padding: 0px;">阮一峰</span></a></span></p><p style="margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(85, 102, 119); letter-spacing: 0px;">日期：</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(85, 102, 119); letter-spacing: 0px;">&nbsp;<a href="http://www.ruanyifeng.com/blog/2013/05/"><span style="color: rgb(85, 102, 119); border: 1px none windowtext; padding: 0px;">2013</span><span style="font-family: 宋体; color: rgb(85, 102, 119); border: 1px none windowtext; padding: 0px;">年</span><span style="color: rgb(85, 102, 119); border: 1px none windowtext; padding: 0px;">5</span><span style="font-family: 宋体; color: rgb(85, 102, 119); border: 1px none windowtext; padding: 0px;">月</span><span style="color: rgb(85, 102, 119); border: 1px none windowtext; padding: 0px;">&nbsp;3</span><span style="font-family: 宋体; color: rgb(85, 102, 119); border: 1px none windowtext; padding: 0px;">日</span></a></span></p><p style="margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">上一篇文章，我介绍了</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;"><a href="http://www.ruanyifeng.com/blog/2013/05/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm.html" target="_blank"><span style="color: rgb(17, 34, 51); border: 1px none windowtext; padding: 0px;">KMP</span><span style="font-family: 宋体; color: rgb(17, 34, 51); border: 1px none windowtext; padding: 0px;">算法</span></a></span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">。</span></p><p style="margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">但是，它并不是效率最高的算法，实际采用并不多。各种文本编辑器的</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">查找</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">功能（</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">Ctrl+F</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">），大多采用</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;"><a href="http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm" target="_blank"><span style="color: rgb(17, 34, 51); border: 1px none windowtext; padding: 0px;">Boyer-Moore</span><span style="font-family: 宋体; color: rgb(17, 34, 51); border: 1px none windowtext; padding: 0px;">算法</span></a></span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><img src="http://localhost:8080/HXBlog/upload/image/20160131/1454245510646092638.png" title="1454245510646092638.png" alt="bg2013050301.jpg.png"/></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">Boyer-Moore</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">算法不仅效率高，而且构思巧妙，容易理解。</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">1977</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">年，德克萨斯大学的</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">Robert S. Boyer</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">教授和</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">J Strother Moore</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">教授发明了这种算法。</span></p><p style="margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">下面，我根据</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">Moore</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">教授自己的</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;"><a href="http://www.cs.utexas.edu/~moore/best-ideas/string-searching/fstrpos-example.html" target="_blank"><span style="font-family: 宋体; color: rgb(17, 34, 51); border: 1px none windowtext; padding: 0px;">例子</span></a></span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">来解释这种算法。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">1.</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><img src="http://localhost:8080/HXBlog/upload/image/20160131/1454245521255035891.png" title="1454245521255035891.png" alt="bg2013050302.png.png"/></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">假定字符串为</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;HERE IS A SIMPLE EXAMPLE&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">，搜索词为</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;EXAMPLE&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">2.</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><img src="http://localhost:8080/HXBlog/upload/image/20160131/1454245531015013071.png" title="1454245531015013071.png" alt="bg2013050303.png.png"/></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">首先，</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">字符串</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">与</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">搜索词</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">头部对齐，从尾部开始比较。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">这是一个很聪明的想法，因为如果尾部字符不匹配，那么只要一次比较，就可以知道前</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">7</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">个字符（整体上）肯定不是要找的结果。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">我们看到，</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;S&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">与</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;E&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">不匹配。这时，</span><strong><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;S&quot;</span></strong><strong><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">就被称为</span></strong><strong><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span></strong><strong><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">坏字符</span></strong><strong><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span></strong><strong><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">（</span></strong><strong><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">bad character</span></strong><strong><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">），即不匹配的字符。</span></strong><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">我们还发现，</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;S&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">不包含在搜索词</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;EXAMPLE&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">之中，这意味着可以把搜索词直接移到</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;S&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">的后一位。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">3.</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><img src="http://localhost:8080/HXBlog/upload/image/20160131/1454245544332080449.png" title="1454245544332080449.png" alt="bg2013050304.png.png"/></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">依然从尾部开始比较，发现</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;P&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">与</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;E&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">不匹配，所以</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;P&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">是</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">坏字符</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">。但是，</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;P&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">包含在搜索词</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;EXAMPLE&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">之中。所以，将搜索词后移两位，两个</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;P&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">对齐。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">4.</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><img src="http://localhost:8080/HXBlog/upload/image/20160131/1454245561984028610.png" title="1454245561984028610.png" alt="bg2013050305.png.png"/></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">我们由此总结出</span><strong><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span></strong><strong><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">坏字符规则</span></strong><strong><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span></strong><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">：</span></p><p style="margin-left: 45px; white-space: normal; line-height: 29px; background: rgb(245, 242, 240);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">　　后移位数</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&nbsp;=&nbsp;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">坏字符的位置</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&nbsp;-&nbsp;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">搜索词中的上一次出现位置</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">如果</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">坏字符</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">不包含在搜索词之中，则上一次出现位置为</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&nbsp;-1</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">以</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;P&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">为例，它作为</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">坏字符</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">，出现在搜索词的第</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">6</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">位（从</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">0</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">开始编号），在搜索词中的上一次出现位置为</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">4</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">，所以后移</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&nbsp;6 - 4 = 2</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">位。再以前面第二步的</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;S&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">为例，它出现在第</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">6</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">位，上一次出现位置是</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&nbsp;-1</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">（即未出现），则整个搜索词后移</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&nbsp;6 - (-1) = 7</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">位。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">5.</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><img src="http://localhost:8080/HXBlog/upload/image/20160131/1454245577343086689.png" title="1454245577343086689.png" alt="bg2013050306.png.png"/></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">依然从尾部开始比较，</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;E&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">与</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;E&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">匹配。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">6.</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><img src="http://localhost:8080/HXBlog/upload/image/20160131/1454245585441049024.png" title="1454245585441049024.png" alt="bg2013050307.png.png"/></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">比较前面一位，</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;LE&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">与</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;LE&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">匹配。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">7.</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><img src="http://localhost:8080/HXBlog/upload/image/20160131/1454245594845054195.png" title="1454245594845054195.png" alt="bg2013050308.png.png"/></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">比较前面一位，</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;PLE&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">与</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;PLE&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">匹配。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">8.</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><img src="http://localhost:8080/HXBlog/upload/image/20160131/1454245607123015274.png" title="1454245607123015274.png" alt="bg2013050309.png.png"/></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">比较前面一位，</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;MPLE&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">与</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;MPLE&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">匹配。<strong>我们把这种情况称为</strong></span><strong><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span></strong><strong><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">好后缀</span></strong><strong><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span></strong><strong><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">（</span></strong><strong><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">good suffix</span></strong><strong><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">），即所有尾部匹配的字符串。</span></strong><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">注意，</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;MPLE&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">、</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;PLE&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">、</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;LE&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">、</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;E&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">都是好后缀。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">9.</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><img src="http://localhost:8080/HXBlog/upload/image/20160131/1454245617849017682.png" title="1454245617849017682.png" alt="bg2013050310.png.png"/></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">比较前一位，发现</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;I&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">与</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;A&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">不匹配。所以，</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;I&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">是</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">坏字符</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">10.</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><img src="http://localhost:8080/HXBlog/upload/image/20160131/1454245633069026382.png" title="1454245633069026382.png" alt="bg2013050311.png.png"/></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">根据</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">坏字符规则</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">，此时搜索词应该后移</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&nbsp;2 -&nbsp;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">（</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">-1</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">）</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">= 3&nbsp;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">位。问题是，此时有没有更好的移法？</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">11.</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><img src="http://localhost:8080/HXBlog/upload/image/20160131/1454245607123015274.png"/></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">我们知道，此时存在</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">好后缀</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">。所以，可以采用</span><strong><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span></strong><strong><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">好后缀规则</span></strong><strong><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span></strong><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">：</span></p><p style="margin-left: 45px; white-space: normal; line-height: 29px; background: rgb(245, 242, 240);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">　　后移位数</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&nbsp;=&nbsp;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">好后缀的位置</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&nbsp;-&nbsp;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">搜索词中的上一次出现位置</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">举例来说，如果字符串</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;ABCDAB&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">的后一个</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;AB&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">是</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">好后缀</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">。那么它的位置是</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">5</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">（从</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">0</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">开始计算，取最后的</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;B&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">的值），在</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">搜索词中的上一次出现位置</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">是</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">1</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">（第一个</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;B&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">的位置），所以后移</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&nbsp;5 - 1 = 4</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">位，前一个</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;AB&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">移到后一个</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;AB&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">的位置。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">再举一个例子，如果字符串</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;ABCDEF&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">的</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;EF&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">是好后缀，则</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;EF&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">的位置是</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">5&nbsp;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">，上一次出现的位置是</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&nbsp;-1</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">（即未出现），所以后移</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&nbsp;5 - (-1) = 6</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">位，即整个字符串移到</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;F&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">的后一位。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">这个规则有三个注意点：</span></p><p style="margin-left: 45px; white-space: normal; line-height: 29px; background: rgb(245, 242, 240);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">　　（</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">1</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">）</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">好后缀</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">的位置以最后一个字符为准。假定</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;ABCDEF&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">的</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;EF&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">是好后缀，则它的位置以</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;F&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">为准，即</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">5</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">（从</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">0</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">开始计算）。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 45px; white-space: normal; line-height: 29px; background: rgb(245, 242, 240);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">　　（</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">2</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">）如果</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">好后缀</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">在搜索词中只出现一次，则它的上一次出现位置为</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&nbsp;-1</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">。比如，</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;EF&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">在</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;ABCDEF&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">之中只出现一次，则它的上一次出现位置为</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">-1</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">（即未出现）。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 45px; white-space: normal; line-height: 29px; background: rgb(245, 242, 240);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">　　（</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">3</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">）如果</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">好后缀</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">有多个，则除了最长的那个</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">好后缀</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">，其他</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">好后缀</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">的上一次出现位置必须在头部。比如，假定</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;BABCDAB&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">的</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">好后缀</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">是</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;DAB&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">、</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;AB&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">、</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;B&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">，请问这时</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">好后缀</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">的上一次出现位置是什么？回答是，此时采用的好后缀是</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;B&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">，它的上一次出现位置是头部，即第</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">0</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">位。这个规则也可以这样表达：如果最长的那个</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">好后缀</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">只出现一次，则可以把搜索词改写成如下形式进行位置计算</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;(DA)BABCDAB&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">，即虚拟加入最前面的</span><span style="font-size: 19px; font-family: Consolas; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;DA&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">回到上文的这个例子。此时，所有的</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">好后缀</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">（</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">MPLE</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">、</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">PLE</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">、</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">LE</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">、</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">E</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">）之中，只有</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;E&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">在</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;EXAMPLE&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">还出现在头部，所以后移</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&nbsp;6 - 0 = 6</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">位。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">12.</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><img src="http://localhost:8080/HXBlog/upload/image/20160131/1454245689750056682.png" title="1454245689750056682.png" alt="bg2013050312.png.png"/></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">可以看到，</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">坏字符规则</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">只能移</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">3</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">位，</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">好后缀规则</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">可以移</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">6</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">位。所以，</span><strong><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">Boyer-Moore</span></strong><strong><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">算法的基本思想是，每次后移这两个规则之中的较大值。</span></strong></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">更巧妙的是，这两个规则的移动位数，只与搜索词有关，与原字符串无关。因此，可以预先计算生成《坏字符规则表》和《好后缀规则表》。使用时，只要查表比较一下就可以了。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">13.</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><img src="http://localhost:8080/HXBlog/upload/image/20160131/1454245701699087377.png" title="1454245701699087377.png" alt="bg2013050313.png.png"/></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">继续从尾部开始比较，</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;P&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">与</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;E&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">不匹配，因此</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;P&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">是</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">坏字符</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">。根据</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">坏字符规则</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">，后移</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&nbsp;6 - 4 = 2</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">位。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">14.</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><img src="http://localhost:8080/HXBlog/upload/image/20160131/1454245707628026290.png" title="1454245707628026290.png" alt="bg2013050314.png.png"/></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">从尾部开始逐位比较，发现全部匹配，于是搜索结束。如果还要继续查找（即找出全部匹配），则根据</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">好后缀规则</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">，后移</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&nbsp;6 - 0 = 6</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">位，即头部的</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;E&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">移到尾部的</span><span style="font-size: 19px; font-family: Georgia, serif; color: rgb(17, 17, 17); letter-spacing: 0px;">&quot;E&quot;</span><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">的位置。</span></p><p style="margin-top: 16px; margin-bottom: 0px; margin-left: 13px; white-space: normal; line-height: 29px; background: rgb(245, 245, 213);"><span style="font-size: 19px; font-family: 宋体; color: rgb(17, 17, 17); letter-spacing: 0px;">（完）</span></p><p style="white-space: normal;">&nbsp;</p><p><br/></p>